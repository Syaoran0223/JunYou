<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>打开APP</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <link rel="stylesheet" href="./css/base.css">
        <link rel="stylesheet" href="./css/share.css">
        <script src="./js/jquery.min.js"></script>
    </head>
    <body>
        <div class="banner">
            <img src="./image/new.png" alt="">
        </div>

        <div class="log">

        </div>
        <script src="./js/fuzhuxian.js" charset="utf-8"></script>
        <script>
        // mWebView.getSettings().setJavaScriptEnabled(true);

        // 判断是否是微信浏览器
        function isWechat(){
            var ua = navigator.userAgent.toLowerCase();
            if(ua.match(/MicroMessenger/i)=="micromessenger"){
                return true;
            }else{
                return false;
            }
        }

        //  判断手机系统后 打开APP || 打开下载页面
        let browserRedirect = function () {
            let sUserAgent = navigator.userAgent.toLowerCase();
            let bIsIpad = sUserAgent.match(/ipad/i) == "ipad";
            let bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os";
            let bIsMidp = sUserAgent.match(/midp/i) == "midp";
            let bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
            let bIsUc = sUserAgent.match(/ucweb/i) == "ucweb";
            let bIsAndroid = sUserAgent.match(/android/i) == "android";
            let bIsCE = sUserAgent.match(/windows ce/i) == "windows ce";
            let bIsWM = sUserAgent.match(/windows mobile/i) == "windows mobile";
            // document.writeln("您的浏览设备为：");
            if (bIsIpad || bIsIphoneOs ) {
                append('苹果', sUserAgent)
                    window.location.href = "ydjyLawWirelessVersion://"
                    window.setTimeout(function() {
                    window.location.href ="https://itunes.apple.com/cn/app/id1061528563"
                    }, 2000)
            } else{
                document.querySelector('.log').innerHTML = navigator.userAgent
                    window.location.href = "lvshitongxing://";//android app协议
                    var a = location.href
                    append('是安卓',a, typeof a)
                //     setTimeout(function() {
                //         window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.fjjy.lawapp";//android 下载地址
                // }, 3000)
            }
        }

        var append = function(t) {
            document.querySelector('.log').insertAdjacentHTML('beforeend', t)

        }
        append('载入前读取</br>')
        // 页面加载后执行
        $(document).ready(function() {;
            append('读取完成</br>')
            let sUserAgent = navigator.userAgent.toLowerCase();
            // append(sUserAgent)
            if (isWechat()) {
                append('在微信浏览器内')
            } else  {
                append('在外部浏览器')
                browserRedirect()
            }

        });
       </script>
    </body>
</html>
